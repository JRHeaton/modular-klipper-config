[gcode_macro filament_load]
gcode:
  {% set load_length = 100 %}

  SAVE_GCODE_STATE NAME=pre_load
  M83
  G1 E{load_length} F{4 * 60}
  RESTORE_GCODE_STATE NAME=pre_load MOVE=0