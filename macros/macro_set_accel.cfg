[gcode_macro SET_ACCEL]
gcode:
  {% if 'ACCEL' not in params %}
    { action_raise_error("Must provide ACCEL param") }
  {% endif %}
  
  {% set decel_factor = params.DECEL_FACTOR|default(0.5)|float %}
  SET_VELOCITY_LIMIT accel={params.ACCEL} accel_to_decel={params.ACCEL|float * decel_factor}