# Printer
[include config/printers/ender_3/ender_3_base.cfg]
[include config/printers/ender_3/steppers_tmc.cfg]
# [include config/printers/ender_3/tmc2209_stealth.cfg]
[include config/printers/ender_3/tmc2209.cfg]
[include config/printers/ender_3/features/bed_screws.cfg]

# Board
[include config/boards/fysetc_spider_v1.0.cfg]

# Extruder
[include config/extruders/orbiter.cfg]

# Hotend
[include config/hotends/rapido.cfg]
[include config/fans/hotend_heatsink_fan.cfg]

# Probe
# [include config/probes/bltouch.cfg]
# [include config/printers/ender_3/features/screws_tilt_adjust.cfg] # Requires probe

# Homing
# [include config/printers/ender_3/homing_slow.cfg]
[include config/printers/ender_3/homing_slow.cfg]
[include config/printers/ender_3/features/safe_z_home.cfg]

# Speed Limits
# [include config/printers/ender_3/speeds/speed_limits_safe.cfg]
[include config/printers/ender_3/speeds/speed_limits_normal.cfg]
# [include config/printers/ender_3/speeds/speed_limits_fast.cfg]

# Display & Menus
# [include config/displays/creality_st7920.cfg]
# [include config/menus/*.cfg]

# Calibration
[include config/calibration/*.cfg]

# Add-Ons
# [include confg/addons/e_stop_button.cfg]
[include config/addons/pi_host_temp.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_28003F000350305538333620-if00
restart_method: command

# Override to use E1 since Z socket is malfunctioning
[tmc2209 stepper_z]
uart_pin: E1_UART

[extruder]
dir_pin: !E0_DIR

[stepper_z]
step_pin: E1_STEP
dir_pin: !E1_DIR
enable_pin: !E1_ENABLE

[heater_fan hotend_heatsink_fan]
fan_speed: 0.3

[firmware_retraction]
retract_length: 0.5 # Uncomment for direct drive

[extruder]
pressure_advance: 0
#control: pid
#pid_Kp: 0
#pid_Ki: 0
#pid_Kd: 0

[heater_bed]
#control: pid
#pid_Kp: 0
#pid_Ki: 0
#pid_Kd: 0

[stepper_z]
position_endstop: 0

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 24.416
#*# pid_ki = 2.504
#*# pid_kd = 59.514
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 67.915
#*# pid_ki = 1.240
#*# pid_kd = 929.590
